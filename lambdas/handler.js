'use strict';

const AWS = require('aws-sdk');
const fileType = require('file-type');

// const imageString ="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";
// const imageString = "9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxITEhUTExMVFhUXFRcWFxcVFRcWFRgXFRcXFhUWFRcYHSggGBolHRUVITEhJSkrLi4uFx8zODMtNygtLisBCgoKDg0OFxAQFy0dHR0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLTc3LSstLf/AABEIALcBEwMBIgACEQEDEQH/xAAbAAABBQEBAAAAAAAAAAAAAAAEAQIDBQYAB//EADoQAAEDAgUCBAQFAwMEAwAAAAEAAhEDIQQFEjFBUWEGInGBEzKRoUKxwdHwFOHxUmKSFSMzgjRywv/EABgBAQEBAQEAAAAAAAAAAAAAAAEAAgME/8QAHREBAQEAAwEBAQEAAAAAAAAAAAERAhIhMQNhQf/aAAwDAQACEQMRAD8A3fxLJlWqAg24uxJXYepquV5NerBgIcE3DkTZDVcS1tkXhXNDZToJXbyFL8TyoKpjQTpC6oHWToHURyUphRUjG5SVarQkC21AE9xlCggBSipISivdwF1MHlRU2wpC5SS/DCkpQEK6pATcO/cqQmvVvCRlSFAwS6SnVnBSEOdKQ1ICGpuSVHpCYVeVxqKFhlSaQpCaBC6q5DvqwLJWgkKQimAoalTgJjnnZMY4ypJWFS7pKbE+FIrRCaXp7nWTAVoG1XKGm2SiE0ugoJ9OkAprQoDUSyoHOqBNDFA7dEOMCFJEXrkwsXILMEEiFMXaWqN9cHZQ1WE8rg7JTT1p7w9ghLhjpElOrYjlIMwbIOooxuJlR4dzXC6eHtGydGGscSbrqsSFFiK0KB1SVasWjnAhOpuIVaKyUYsynRi2FVMoVgSUKyrqC6k0CU6ME1MUDZLTrWVJWzigx5a94af9xAt1VhQxtNw1Mc1w6ggpSxc+AhW1SSmF5cniwUk4dZLZQOKVjrK1YmpVApC5DsAShydWJgV2opmoJdSgnpBSMAlRNMBB4/GaRaSdgBuT0Cgsq+Ia0FziABuSYCqMJ4jpVqxo0jqLQS4j5RFon1QFTA/FeDiDqgSKV/hjq4j8ZvzYI7COBNmgAbQIHS1toTqXcSFGeyjFdKx8q1YcJUjmWQ76sFI7EFGnEjd1JVeEF/UXTqlSRKtWJqbjKdiKyFp5g0boWvj9RgI7HBf9SuVdod0XLPanIDZlbxHdOrYdzeFqjTlc7Dg7hHU9mIJcXX2U9eu2IWnqZWw8IOrkDSjrT2ijw+ye8xsjcRlBY2GqvoZVV5KMp2IXvM3T2lSnKKhO6IGVOAR6gYUlOonHBuG6HqVADCkKa5I+uYhRMqBJ8QJ1YjbgKUvrvY1zjDRqEiwvHRRsp05J+G1h4dTse4MWKsBUHwxM/Mdv3UHzTDgR2+YevVduPHXO0RTrPYL+YR8w/wD0OE+njQYM2QD9dIgi4P0I/Q+yFruY+dJ+E/cwJYb3JH6iO6LLFKvq+LAG6p8dnzadwRMbdYMR+azGZ5tVbUFJ4g6dQcDLXAXBb+yzhql74cdyQPc/z6rXHjv0Wt6/xjTgxz9kPhvGAg6t4t36Lz7ESLd/ylRtxBgkn/H8C30jPavR6vjNsRzH8/VGYLxWx7mtmOs9l5jQqamOJ4Ag9z/hOoPkADdx36dP53ReMXZ67Vz6Q1tMa3uNmtufU9Bbcoqj5DLjrrEXj5Wz+Fp9Yk/4WJ8OYr4LQxu5GpzuXOIFj2Eq+y3MtECLg33JcRsPb+brEbWGdSDp1BjRGsj5nf7R0EqLA5vJaxgtMfySqPPsXPPmJk3nfp/OqMyGkQ6n1mfRa5USNJXxYbMlMoY+VDiMre9zjxJRWWZRp+ZcvWvDauKkynf1Mo2plIlEUsrCcq2K5hJ4Uvw3G0K3p4UDhTfCAT1GqmjlANyiaeVtBlWTQlhanGM20OMM3olU0LkgICnFyGpvUheubaTUllQtKfKQbUuu0JHlLKkalhRVqkKCtjAAgparAqjF4Brj3UOa501gmVmc08VAQ5pRmncWb8IZMHZV9asW8qrZ4rBLpO6z9TPzJk7pn5nu9BwmI1Un/wCxwdHY2KqswqupOD2k6XXkbf2Q3hDNW1axEwSwgjr0tyrvGUtILXCWfkt8fPB9Mw+YNqth3zdzv3BPKjrMvcyBJE2cAd/zTcvoaXGL099phB5tmLG/II7Wum8hilznzQN42j6T/OizubNbTewSYiT9TdW2MbqOoEkEz3B3us7mrHueNPmHECYi5gfUq4s8ltmLGwNJBILXRz5vNHp+6ArM0kG0Wsd77SPdMcCWPgyWlpe7m9rEcbInEYfW1xBJAZItuYj8yP8AiVpkuGe00nNJA2gjkAbDv+6ZlTgARy2bG0Xi/wDOE7MHsFOlRaTqPmfAHkLvM8Adbx3hNymlpc4uMlt3A385u1p633F7NN9lX4o0eBr6CC7e3QbHb2t/AtdgGUunq4wLnff6rEUWOcJEWN3vsJO9+eoG5VhgX/DgSTpMy75TyS1u7j3suTpF3meHptqHSCYuSdh3nr/hWvhyiXu1zyIH7oH/AKnTdSNhMbnePQdYRHhPGE7wB+EduquVaje0WKUMuosO6QIRCYxTgE4JgK5yQdKSUrUhKU4OTi5DVXXsnAlGrE+pcodSVQVDHqRz5QOGqWRzCFzrpEjX2Tw5RVDCQuVEc5yQP6qOtVA3VXj8wDQSFalhjMQAFh/Eme6AQDugc+8TESBusXj8eam5lbkZtT4rOajxBJVXXruNpXMI2lNewTuujIVz3AqJ1QyjMQwWKir0LSoLXwZj2sxTA9uoEx6Hgg8L0zN8yglumRz1APPdeOYCsabxUG7TIXoNDOxiAC0AmLg2APN+Fz5z3XT87i+diKbaBNM3iCDYrK4qoHm4I7kXufb9lYveHDSBB5A+wQ9WgQQCD6xN47b7LOtWAKmFcY0yT09eDqsQe0quzDCOFRhPlOoahMSDYlpm9jcf3V+7K6lQz8kfKRMW7/XZHZ1ktSvhg4NDqjNw3za430z7eq3GKyOMwX9PXqUyDoqslpPXt3gqOjj2gOuZv94E26TJ91us2yUYjA0nGWVWMlpdIIc3YGfYLHnJi4vEgCYDjtBfpdJ42H/I8StSiwR4ay1lZz8Q9pa1tQlvILunpefXSosnw2t9RzmwA4u0+b5nHd0CXbbC5j67rJsNLBRa3TYEgWvEE/UH+Qq8YXC5fPx651OdOlgBqO3Fm3hszc9IRurMVDy0VBqbVcASBLNLb7kG8C3+kb+6mxGHaTIAcDt59u24H+UXhM6wLngEG53eBSI7RBtfj+6Ex9egytALWsN7PDo9iPujlDKiZTcBB2J5mLbD0R2WGv8AEawaQXGNRdaCblQYjG03DU12rt+3RPySo51RsGbyBvCyXrGCBaACZsNhAVhqVXhHHSNW8IltRSEB11xfdDtKcCEgQHJSZUWpIXK1JHEJutQvKZJWdOJi5IoDUSK04psK+QjqIKqMEYV3hngqZlEthNqpp3SVDZTQDNakNlYXN83sQCr7xFmopggrzeriNbyPcJkFBY95cSSdroD4ovZHZlU7Xm6HrYUEWtOy6MGYUg9iCuqUpcSpMPQcXARHf0T8eyHwFII+nquNhuETiWNLBNpsmtphm/KVgL52EGQpK3GUwIHZaTwtUaGGHDVuQs7jGEuJ6WU2V1tDxB5VfYp9bGnmbabri3r9lJX8QYYkTO4PUjn0WezHU/aw56e6PyTLabarRVa0giZ352/ys9Z9b2/F9j8bXqGm2j/2mvbq1ub5iJiQDshKIxDKz6TMU8PaxzyHbSx2h7XNIkEOtNwVqfEuDL206+Gh2huhzW3gWggDoshRovNR5oUHmtUGk9hMkbmBNyu/Dp1cOfft49FyLGtx2CJcB8RsteI/E07xz+4WNzHLC17QAdOouJkzBIdfg/LHv2UfhbGOy6rVw9TzVKnzAfKHOAO/QA79fVamniGFpkCAZ72tI+i4c7J8d+M0/wAOugvc78LJjoGz+688yisyuzFvILsU8vDdUQBEt0uIlrtQvG7ZEhXud5w6mHiiQCbGeWOsQOhgKkyDKcLWY6oa5w9QEXjyunpPuLdFr8+UntY/TjvkOr//ABdFRo1AtDNXzSNIA/5T7Kx8U+FKTabasFri0SBJvp4HHVJTw2EovFWpXNdzbtEQyRtc2KBzfxC/FPiYZwGxPawTz59r4zw49Z6ydIPpkOvp9491tvCVQvqCNt7Kp/onkaXCW8b7/utZ4IwZptOoEEnYN49VjlfG5G+w1mj9U81ICGa1zoH+VKaUWWGxOGUpKGY/hEQpG6zKkIUTnp4epFcyyRz7J5dKZUiFJHoSpwCRWJQGn0RlF2kXUbDCex+oFLEECtyhcZmAAKlDohZvxDjBTJA5Q0y3ifMC9xEWWdAtKIzaoSTdC4WrIIctwVHjnCAfbuoKMnfZSuAbIILgf5ZdRItpMDod1pkVUaA2xg8Kqp1Xl0kTdW+KbIllyNxKEa0i5t6oJlerqi1vuPVQ1tTRY2SVJL7ET2KiqFxdBNvskIcU62o78pnIKfjSNiISMqgAWn1P7JC5GJPkaDz2EfutC2jULHSC5sSIIkdwFncA5pEnSB2FyegKun5toYNBAJF4sY6LFbgfDZtWoH/yVWjoeOx5Woy3P8RUuK5A5AA1e7om89eFmGYOpiXi5tvAMj16LRnKNNBoFR7N/wDwtDnGNwi0xSZvl9UVH1XBxNTnmNyQeP7BWeCrNp0BLwCLeY8kz6lF+FMpe2rDviFlxD6bBvM2LpEyDPdQePPCTGNNejpBF3Mm5HUcLX8pn8UGbVGVnN0ODnSYAvc/zjsm4VzKIBdq1PlpAEjr5gTP0Wk8GeHqbKQrPc34jhIEE6BwJG52Pun4rI6clzWtmSdRpazuXWLn2juI7BH8Fn+s9jqDqzGmk6W9I+3M+6CwtCpR+ZzP+N59bLfUqLxSDnubtA1sDDA7CR7LOZjhnOJ8gd/6N268kfRE0VVYTFO1fD+bUexH5L1Pw/hWtptbGw2n9AsJlGHax41BrT/9W294XoGFxLQAAbdv7Koi3puACbiHiFCKwIsmMqSglZUko1rigyOikw5M3KGhLhyVwNlHVrjZIHGFkkrvPC6iSUjqvCjbLfdWrBBJXJBK5XqVbIKkkBDUn2mFNTb8QSQWldHNI8+VYDxNVJdzblbfFlwFhKx3iTD6hYIaY7GujdCNqiY27hLi3kG47XQzcQedusLpGU2JqAACR6jdML9vxe6QyflEjupKlA6Qdj0CglOJaexH3TXvkx+qjoUZd+dk3E4HzWcL7IKXL6I1nUL9UysWh7uANipmD4UzMnogHmxJMzwpBMXUkzuloNm8QOf0A9UG9wm8o6lV8umdI7SPqd/utMjmC4L9LdhcnboGi4949VY4epSJEadRP4tu1p+11SUaG0NJjm5H05Vpg8LpOq83FotG8DabHew5BPlRYZWhwj3NJLnkNER+GZ2hsQwHi0ngG61FDGM0lrwA0WvvMTLjxFzHAEm1liaTny1z7PuWNvDBzUdP4rGJkyJvphdXzM2Y0TNwO29+7jczP4VnGteg4TDAeZmm8bAA2469OfyUGMy+riRpeSxhtDdzHU9FhMP4ir03Aumx+xJk/T81q6viqpQY11Vogu09zMpUo/C5GaIDKb3AbNBOpuwiJ7QrJwYxo+JBPTv6dP8AKzI8YuqAhukW1A9PZAPx1ao75/Naensiq3V1j8zJkiHUwPNTsYHUcR2Pfbip/qyQP6bTE7W0z0Ezpft5XXP4S5DuwDg/W6pp5v8ALfieFJizQoglpuRcD5SD/t2gnjaduEzGUWIzCn8j3DXMEGbHpq+Yejp9Qtjk7h8MSCLbEg/QixCxOFwLK5D3fKPxXL2++72etxtPXYYQhjAAZaPuqqLWg4g9lKwGZlV2GxUj+W/nVHNfIssFYYaqnP3sgcHV7IxpUUWJfAS4XE6hCdUIKqa1U0nTuCs2NSrsvACjOJQf9XaeqWiNasQoYwpVwgWhclB6Z4UzTASvE7AEdk0H+futsGXQeIoMIMtRjgQLn3hNaJO36KTFZ/4S1DWDveAsDjcE5riyCAOYXt1YCC1VOLydlVpkAd4VuH68ywzBpi/uohXiR/hafHeHHh3l8w7KpzTLjThpYWncSnRiuwbS43t+y6oQHeUe5sicHQLTJ55P6KTE0TvAAO5P7KQatScRfT7FU+Y0QNj/AD1V1iBtoZMcqrx9G/Q8jhUFVlLD9YRVBjR8zhHSLpW7x07K0yxuHdZxM77AjuWn8K0hGBy0MOtj9RIGlpJET1Pf+byDmB4nXqbaPKCYAEkwLCwMD+yFGX0tUisGzMa4kdYmyfSrimCW4j4nmDb9d4sImw+qyUvwXvBbpIaYJvphguBO5MCd+ndJR/7RcQ0SfxEWA/0zwPRQVs0DrPnWbTSN5J6WROKMAF+s7WsD7ySPpdFMKK9ONVSHE2ZAhoESXegTMfjadegGgy3mTD2nZrmnnbYoY4ujs58Az5SC4/8AtG3oh8LQY58tILY0gSdvxE2tc/mrFpMNl9VpHw3AuFwDYkc2O6MxGOrseC5paQBFoCmoCmYbUpuEE6XgyCLQZmyt61KmBoMnyy0uF46SLH8+ytGKh3incObY7npwbdLJ+GwwqHXEt6A7g8JtfCtcAS3TxYW6qDDAtJpkwG29QkLjDvLbMkNF+AfdafJKjXsAIg9FhauaOnTMdJAg+6JyrM6jX3dbrYIwvRjgRMixTmUHg2NkNkuYax5iD3Vo98AdFWBHTYQn1XEKdtQaZG6b8PUNkEjac82TX4abFEUqJ+iVrgpKitgKgd/tROGtuYVuw2QdXC6nTCLGpUZJXJxqgWgrkFJQoNDjF+ZUzRxv7fmoKZLblTU6vQb/AEW8xjdRhocDMqMi4AdA+9rooRKjfPp04UA2KomxBk/dD16zWQZnVYhT4io6YBEdSmVcOLWHccf2UVf8MEWPdU+bZU4+eZ3sf0VxWwx1AtMCduiKqVLRYjkIsMrzKqHAglsXIHZKMNLvNMH6/RejnLKZ+ZgjfuCpXYFmoHSDxJCtOPPq2X1GgFrJb/qF49RwqfMstdp1N3FzFyvY6eCYCdI4uI37KpdlQuA0XO/6LOnHkeHEMJcW34cd/Uj9FHiazAzueG7fvHqtrnHhBznamNtyNgf2QNbwrAAcI9ASPeN10ljFjB1WNkEgknYdR73Vth8PUc0F0NYCTEeWTpgDrtx1V/Vy+hTBOoauZEbcbIGsalfyCpTDdhfSQPonRgTw9hdVVzulmnq4HzEKfHuFRxbeGFwk7c7/AF+6Nw+ENKdJBsQ2JgkiJJ6W/NVrWiHXkyWgT8xcQTbiP7dUH4gB0io2LcE2ubg/SEw0WhjXAva4u8padt41N2iBKMxVMAARvqBnYBocAD1Pn+0oMwXgtJ0yGMJG8uiI6Sy/r9Vlp8FXYW6apYTHEXPpKKZTLSNJ8v8ApPRYvK6hlz3EB4N3ESAPT3A91p6Ganm4jaIHqb3uLrFmNy6nxbCHCB5SJ7AiZ/MfVUdfFBlwJvBn9fsrypjC8hpaB0O0naB/PZUuaZe+C5rdQ/2jaOqYKhxGFJMtM89r7/zulp4Eg3l0nebAJ7MT5Wt2MD7p+HxIL9OqOh3HcFWrF5ldZ9EgsuCbiCHfTn1W6yfMG1G3BB6Feb1scGkAkdJ/Fz0V7kmbhsEuBba83Hv0TVj0BlGL/ZEUh2Q+AxLHNDgQUcwXkj2WUY1s2CSnTDSRvZSB1+gXaQDKkdSEbhLabJlGSew+6e4NE9SlGvoieEqTzcbJUoM53CGDrwjabJUb6ICtZR/LymPdO+21uvCJawcpKmmEWGULXpEjiZ/VR4mwIIt246Jz8SNgm1KoJAUUNHkC3eeiRrQeBI5jn1UtJ4YTv7hSNkuuLRxsZ2QnMeIgR62UzWExB/umGi3YM9087RGyGifDIJulZvwT1H6pTqi9/QKVlJukECAfr7oJNLIgiSeyAxGEBOys3YbmT2hIaf8Aq+36qTPZjkFKo20SsriPCdRjiWBrvUn+R2XpbMPzA9EhoHget4Snh+eMqB2gggwb7AG14Fyefb0gfLmBo8jS4NkgGLmwl3+m0c8e69nzDLA46Sym6eCwfXULrPYjwI0E6AWjcNbsOsBPZnq86r0yXBpnYm87kxq9AP16obD4J5qhnytFhPBBnV9Wheg1fCVRoJY7US2PMbj+bKkxmCq0yNbNnTqiQTBG42EWunsuqgrYPSNIuPM29iSHaYNuonvH0mwmFv5og3FhcCROo9OR0ukxYMwJm8k9W8iNuvsn4nCuc0XDrySBEkn7Oub8n2V9DjVJc4U3GBeJNgbTHuNj9lpvDWIFJ4ZV83xOwgEcWsFR0NLIJYHOaIN4JH4vreDtc7I/w9hRUrB7CTTmb2c1wPym2/r1Ummx3hDD4gamDQ+ZBHUGbjkLzzNMgr4Uy8EnU6XAWMmZXtNBggAWP3U9TANLXBzGuB3nlZlP14LVrF2l0EENi42Idv8AQ/ZFZfmOl+gtBIkeo5ng3/NabxD4JcQXUnuYS4nQ4EsM9HAWCz3/AEOvSEvo1A5t5DdTXDm/styyjGu8JZnoqaQZng9ex5XotF8gHqvJvD+VVDUFUtIDJ0ibnp7DheoZS06Q4m8bdFm/UK2d7KOk86j04RLRI4nuoww9B7bpxFeSCOvRPAMzH89VFREkuIk7T6J9M3P7pSQELlC5nf7hcoGMsmwSUi5YIgUbKF9HhcuWwhbRb0T/AOlaeEq5USN9PTwog3oAFy5VilEsAi5kqJlCAdvufzXLlmtQjawaL/Uc7bohtUbSeYEJFy59ruN4nZSMXK4t4n9Vy5aBxJ4/ykYYMH25SLks0yowBwJJmD6JRVuALk3vtHKVcsXytT4jOD8xJ9RyJSHDCIcJm5SLlrFrH5/4S+KfiUiKcXDTcOFjeNlnR4HxEF3xGgHaCZvxcXHYrlytORYUPBTnR8So3VbVpBueP0+i1GUeGm0XSwb3cTFyNrBcuVPRfGhDY/X27JwcSNrH0XLlpklNgO9+LoTF5dTfIcJaeDtfgjkLlyghpZexhs0ADbSItsBHEQi6TAy/B2XLlFJ8QbBSGl6e91y5MFDh7gYDRA3M3+imZTaTq/RcuVCcb8Lly5Qf/9k=";
// const imageString = "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxITEhUTExMVFhUXFRcWFxcVFRcWFRgXFRcXFhUWFRcYHSggGBolHRUVITEhJSkrLi4uFx8zODMtNygtLisBCgoKDg0OFxAQFy0dHR0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLTc3LSstLf/AABEIALcBEwMBIgACEQEDEQH/xAAbAAABBQEBAAAAAAAAAAAAAAAEAQIDBQYAB//EADoQAAEDAgUCBAQFAwMEAwAAAAEAAhEDIQQFEjFBUWEGInGBEzKRoUKxwdHwFOHxUmKSFSMzgjRywv/EABgBAQEBAQEAAAAAAAAAAAAAAAEAAgME/8QAHREBAQEAAwEBAQEAAAAAAAAAAAERAhIhMQNhQf/aAAwDAQACEQMRAD8A3fxLJlWqAg24uxJXYepquV5NerBgIcE3DkTZDVcS1tkXhXNDZToJXbyFL8TyoKpjQTpC6oHWToHURyUphRUjG5SVarQkC21AE9xlCggBSipISivdwF1MHlRU2wpC5SS/DCkpQEK6pATcO/cqQmvVvCRlSFAwS6SnVnBSEOdKQ1ICGpuSVHpCYVeVxqKFhlSaQpCaBC6q5DvqwLJWgkKQimAoalTgJjnnZMY4ypJWFS7pKbE+FIrRCaXp7nWTAVoG1XKGm2SiE0ugoJ9OkAprQoDUSyoHOqBNDFA7dEOMCFJEXrkwsXILMEEiFMXaWqN9cHZQ1WE8rg7JTT1p7w9ghLhjpElOrYjlIMwbIOooxuJlR4dzXC6eHtGydGGscSbrqsSFFiK0KB1SVasWjnAhOpuIVaKyUYsynRi2FVMoVgSUKyrqC6k0CU6ME1MUDZLTrWVJWzigx5a94af9xAt1VhQxtNw1Mc1w6ggpSxc+AhW1SSmF5cniwUk4dZLZQOKVjrK1YmpVApC5DsAShydWJgV2opmoJdSgnpBSMAlRNMBB4/GaRaSdgBuT0Cgsq+Ia0FziABuSYCqMJ4jpVqxo0jqLQS4j5RFon1QFTA/FeDiDqgSKV/hjq4j8ZvzYI7COBNmgAbQIHS1toTqXcSFGeyjFdKx8q1YcJUjmWQ76sFI7EFGnEjd1JVeEF/UXTqlSRKtWJqbjKdiKyFp5g0boWvj9RgI7HBf9SuVdod0XLPanIDZlbxHdOrYdzeFqjTlc7Dg7hHU9mIJcXX2U9eu2IWnqZWw8IOrkDSjrT2ijw+ye8xsjcRlBY2GqvoZVV5KMp2IXvM3T2lSnKKhO6IGVOAR6gYUlOonHBuG6HqVADCkKa5I+uYhRMqBJ8QJ1YjbgKUvrvY1zjDRqEiwvHRRsp05J+G1h4dTse4MWKsBUHwxM/Mdv3UHzTDgR2+YevVduPHXO0RTrPYL+YR8w/wD0OE+njQYM2QD9dIgi4P0I/Q+yFruY+dJ+E/cwJYb3JH6iO6LLFKvq+LAG6p8dnzadwRMbdYMR+azGZ5tVbUFJ4g6dQcDLXAXBb+yzhql74cdyQPc/z6rXHjv0Wt6/xjTgxz9kPhvGAg6t4t36Lz7ESLd/ylRtxBgkn/H8C30jPavR6vjNsRzH8/VGYLxWx7mtmOs9l5jQqamOJ4Ag9z/hOoPkADdx36dP53ReMXZ67Vz6Q1tMa3uNmtufU9Bbcoqj5DLjrrEXj5Wz+Fp9Yk/4WJ8OYr4LQxu5GpzuXOIFj2Eq+y3MtECLg33JcRsPb+brEbWGdSDp1BjRGsj5nf7R0EqLA5vJaxgtMfySqPPsXPPmJk3nfp/OqMyGkQ6n1mfRa5USNJXxYbMlMoY+VDiMre9zjxJRWWZRp+ZcvWvDauKkynf1Mo2plIlEUsrCcq2K5hJ4Uvw3G0K3p4UDhTfCAT1GqmjlANyiaeVtBlWTQlhanGM20OMM3olU0LkgICnFyGpvUheubaTUllQtKfKQbUuu0JHlLKkalhRVqkKCtjAAgparAqjF4Brj3UOa501gmVmc08VAQ5pRmncWb8IZMHZV9asW8qrZ4rBLpO6z9TPzJk7pn5nu9BwmI1Un/wCxwdHY2KqswqupOD2k6XXkbf2Q3hDNW1axEwSwgjr0tyrvGUtILXCWfkt8fPB9Mw+YNqth3zdzv3BPKjrMvcyBJE2cAd/zTcvoaXGL099phB5tmLG/II7Wum8hilznzQN42j6T/OizubNbTewSYiT9TdW2MbqOoEkEz3B3us7mrHueNPmHECYi5gfUq4s8ltmLGwNJBILXRz5vNHp+6ArM0kG0Wsd77SPdMcCWPgyWlpe7m9rEcbInEYfW1xBJAZItuYj8yP8AiVpkuGe00nNJA2gjkAbDv+6ZlTgARy2bG0Xi/wDOE7MHsFOlRaTqPmfAHkLvM8Adbx3hNymlpc4uMlt3A385u1p633F7NN9lX4o0eBr6CC7e3QbHb2t/AtdgGUunq4wLnff6rEUWOcJEWN3vsJO9+eoG5VhgX/DgSTpMy75TyS1u7j3suTpF3meHptqHSCYuSdh3nr/hWvhyiXu1zyIH7oH/AKnTdSNhMbnePQdYRHhPGE7wB+EduquVaje0WKUMuosO6QIRCYxTgE4JgK5yQdKSUrUhKU4OTi5DVXXsnAlGrE+pcodSVQVDHqRz5QOGqWRzCFzrpEjX2Tw5RVDCQuVEc5yQP6qOtVA3VXj8wDQSFalhjMQAFh/Eme6AQDugc+8TESBusXj8eam5lbkZtT4rOajxBJVXXruNpXMI2lNewTuujIVz3AqJ1QyjMQwWKir0LSoLXwZj2sxTA9uoEx6Hgg8L0zN8yglumRz1APPdeOYCsabxUG7TIXoNDOxiAC0AmLg2APN+Fz5z3XT87i+diKbaBNM3iCDYrK4qoHm4I7kXufb9lYveHDSBB5A+wQ9WgQQCD6xN47b7LOtWAKmFcY0yT09eDqsQe0quzDCOFRhPlOoahMSDYlpm9jcf3V+7K6lQz8kfKRMW7/XZHZ1ktSvhg4NDqjNw3za430z7eq3GKyOMwX9PXqUyDoqslpPXt3gqOjj2gOuZv94E26TJ91us2yUYjA0nGWVWMlpdIIc3YGfYLHnJi4vEgCYDjtBfpdJ42H/I8StSiwR4ay1lZz8Q9pa1tQlvILunpefXSosnw2t9RzmwA4u0+b5nHd0CXbbC5j67rJsNLBRa3TYEgWvEE/UH+Qq8YXC5fPx651OdOlgBqO3Fm3hszc9IRurMVDy0VBqbVcASBLNLb7kG8C3+kb+6mxGHaTIAcDt59u24H+UXhM6wLngEG53eBSI7RBtfj+6Ex9egytALWsN7PDo9iPujlDKiZTcBB2J5mLbD0R2WGv8AEawaQXGNRdaCblQYjG03DU12rt+3RPySo51RsGbyBvCyXrGCBaACZsNhAVhqVXhHHSNW8IltRSEB11xfdDtKcCEgQHJSZUWpIXK1JHEJutQvKZJWdOJi5IoDUSK04psK+QjqIKqMEYV3hngqZlEthNqpp3SVDZTQDNakNlYXN83sQCr7xFmopggrzeriNbyPcJkFBY95cSSdroD4ovZHZlU7Xm6HrYUEWtOy6MGYUg9iCuqUpcSpMPQcXARHf0T8eyHwFII+nquNhuETiWNLBNpsmtphm/KVgL52EGQpK3GUwIHZaTwtUaGGHDVuQs7jGEuJ6WU2V1tDxB5VfYp9bGnmbabri3r9lJX8QYYkTO4PUjn0WezHU/aw56e6PyTLabarRVa0giZ352/ys9Z9b2/F9j8bXqGm2j/2mvbq1ub5iJiQDshKIxDKz6TMU8PaxzyHbSx2h7XNIkEOtNwVqfEuDL206+Gh2huhzW3gWggDoshRovNR5oUHmtUGk9hMkbmBNyu/Dp1cOfft49FyLGtx2CJcB8RsteI/E07xz+4WNzHLC17QAdOouJkzBIdfg/LHv2UfhbGOy6rVw9TzVKnzAfKHOAO/QA79fVamniGFpkCAZ72tI+i4c7J8d+M0/wAOugvc78LJjoGz+688yisyuzFvILsU8vDdUQBEt0uIlrtQvG7ZEhXud5w6mHiiQCbGeWOsQOhgKkyDKcLWY6oa5w9QEXjyunpPuLdFr8+UntY/TjvkOr//ABdFRo1AtDNXzSNIA/5T7Kx8U+FKTabasFri0SBJvp4HHVJTw2EovFWpXNdzbtEQyRtc2KBzfxC/FPiYZwGxPawTz59r4zw49Z6ydIPpkOvp9491tvCVQvqCNt7Kp/onkaXCW8b7/utZ4IwZptOoEEnYN49VjlfG5G+w1mj9U81ICGa1zoH+VKaUWWGxOGUpKGY/hEQpG6zKkIUTnp4epFcyyRz7J5dKZUiFJHoSpwCRWJQGn0RlF2kXUbDCex+oFLEECtyhcZmAAKlDohZvxDjBTJA5Q0y3ifMC9xEWWdAtKIzaoSTdC4WrIIctwVHjnCAfbuoKMnfZSuAbIILgf5ZdRItpMDod1pkVUaA2xg8Kqp1Xl0kTdW+KbIllyNxKEa0i5t6oJlerqi1vuPVQ1tTRY2SVJL7ET2KiqFxdBNvskIcU62o78pnIKfjSNiISMqgAWn1P7JC5GJPkaDz2EfutC2jULHSC5sSIIkdwFncA5pEnSB2FyegKun5toYNBAJF4sY6LFbgfDZtWoH/yVWjoeOx5Woy3P8RUuK5A5AA1e7om89eFmGYOpiXi5tvAMj16LRnKNNBoFR7N/wDwtDnGNwi0xSZvl9UVH1XBxNTnmNyQeP7BWeCrNp0BLwCLeY8kz6lF+FMpe2rDviFlxD6bBvM2LpEyDPdQePPCTGNNejpBF3Mm5HUcLX8pn8UGbVGVnN0ODnSYAvc/zjsm4VzKIBdq1PlpAEjr5gTP0Wk8GeHqbKQrPc34jhIEE6BwJG52Pun4rI6clzWtmSdRpazuXWLn2juI7BH8Fn+s9jqDqzGmk6W9I+3M+6CwtCpR+ZzP+N59bLfUqLxSDnubtA1sDDA7CR7LOZjhnOJ8gd/6N268kfRE0VVYTFO1fD+bUexH5L1Pw/hWtptbGw2n9AsJlGHax41BrT/9W294XoGFxLQAAbdv7Koi3puACbiHiFCKwIsmMqSglZUko1rigyOikw5M3KGhLhyVwNlHVrjZIHGFkkrvPC6iSUjqvCjbLfdWrBBJXJBK5XqVbIKkkBDUn2mFNTb8QSQWldHNI8+VYDxNVJdzblbfFlwFhKx3iTD6hYIaY7GujdCNqiY27hLi3kG47XQzcQedusLpGU2JqAACR6jdML9vxe6QyflEjupKlA6Qdj0CglOJaexH3TXvkx+qjoUZd+dk3E4HzWcL7IKXL6I1nUL9UysWh7uANipmD4UzMnogHmxJMzwpBMXUkzuloNm8QOf0A9UG9wm8o6lV8umdI7SPqd/utMjmC4L9LdhcnboGi4949VY4epSJEadRP4tu1p+11SUaG0NJjm5H05Vpg8LpOq83FotG8DabHew5BPlRYZWhwj3NJLnkNER+GZ2hsQwHi0ngG61FDGM0lrwA0WvvMTLjxFzHAEm1liaTny1z7PuWNvDBzUdP4rGJkyJvphdXzM2Y0TNwO29+7jczP4VnGteg4TDAeZmm8bAA2469OfyUGMy+riRpeSxhtDdzHU9FhMP4ir03Aumx+xJk/T81q6viqpQY11Vogu09zMpUo/C5GaIDKb3AbNBOpuwiJ7QrJwYxo+JBPTv6dP8AKzI8YuqAhukW1A9PZAPx1ao75/Naensiq3V1j8zJkiHUwPNTsYHUcR2Pfbip/qyQP6bTE7W0z0Ezpft5XXP4S5DuwDg/W6pp5v8ALfieFJizQoglpuRcD5SD/t2gnjaduEzGUWIzCn8j3DXMEGbHpq+Yejp9Qtjk7h8MSCLbEg/QixCxOFwLK5D3fKPxXL2++72etxtPXYYQhjAAZaPuqqLWg4g9lKwGZlV2GxUj+W/nVHNfIssFYYaqnP3sgcHV7IxpUUWJfAS4XE6hCdUIKqa1U0nTuCs2NSrsvACjOJQf9XaeqWiNasQoYwpVwgWhclB6Z4UzTASvE7AEdk0H+futsGXQeIoMIMtRjgQLn3hNaJO36KTFZ/4S1DWDveAsDjcE5riyCAOYXt1YCC1VOLydlVpkAd4VuH68ywzBpi/uohXiR/hafHeHHh3l8w7KpzTLjThpYWncSnRiuwbS43t+y6oQHeUe5sicHQLTJ55P6KTE0TvAAO5P7KQatScRfT7FU+Y0QNj/AD1V1iBtoZMcqrx9G/Q8jhUFVlLD9YRVBjR8zhHSLpW7x07K0yxuHdZxM77AjuWn8K0hGBy0MOtj9RIGlpJET1Pf+byDmB4nXqbaPKCYAEkwLCwMD+yFGX0tUisGzMa4kdYmyfSrimCW4j4nmDb9d4sImw+qyUvwXvBbpIaYJvphguBO5MCd+ndJR/7RcQ0SfxEWA/0zwPRQVs0DrPnWbTSN5J6WROKMAF+s7WsD7ySPpdFMKK9ONVSHE2ZAhoESXegTMfjadegGgy3mTD2nZrmnnbYoY4ujs58Az5SC4/8AtG3oh8LQY58tILY0gSdvxE2tc/mrFpMNl9VpHw3AuFwDYkc2O6MxGOrseC5paQBFoCmoCmYbUpuEE6XgyCLQZmyt61KmBoMnyy0uF46SLH8+ytGKh3incObY7npwbdLJ+GwwqHXEt6A7g8JtfCtcAS3TxYW6qDDAtJpkwG29QkLjDvLbMkNF+AfdafJKjXsAIg9FhauaOnTMdJAg+6JyrM6jX3dbrYIwvRjgRMixTmUHg2NkNkuYax5iD3Vo98AdFWBHTYQn1XEKdtQaZG6b8PUNkEjac82TX4abFEUqJ+iVrgpKitgKgd/tROGtuYVuw2QdXC6nTCLGpUZJXJxqgWgrkFJQoNDjF+ZUzRxv7fmoKZLblTU6vQb/AEW8xjdRhocDMqMi4AdA+9rooRKjfPp04UA2KomxBk/dD16zWQZnVYhT4io6YBEdSmVcOLWHccf2UVf8MEWPdU+bZU4+eZ3sf0VxWwx1AtMCduiKqVLRYjkIsMrzKqHAglsXIHZKMNLvNMH6/RejnLKZ+ZgjfuCpXYFmoHSDxJCtOPPq2X1GgFrJb/qF49RwqfMstdp1N3FzFyvY6eCYCdI4uI37KpdlQuA0XO/6LOnHkeHEMJcW34cd/Uj9FHiazAzueG7fvHqtrnHhBznamNtyNgf2QNbwrAAcI9ASPeN10ljFjB1WNkEgknYdR73Vth8PUc0F0NYCTEeWTpgDrtx1V/Vy+hTBOoauZEbcbIGsalfyCpTDdhfSQPonRgTw9hdVVzulmnq4HzEKfHuFRxbeGFwk7c7/AF+6Nw+ENKdJBsQ2JgkiJJ6W/NVrWiHXkyWgT8xcQTbiP7dUH4gB0io2LcE2ubg/SEw0WhjXAva4u8padt41N2iBKMxVMAARvqBnYBocAD1Pn+0oMwXgtJ0yGMJG8uiI6Sy/r9Vlp8FXYW6apYTHEXPpKKZTLSNJ8v8ApPRYvK6hlz3EB4N3ESAPT3A91p6Ganm4jaIHqb3uLrFmNy6nxbCHCB5SJ7AiZ/MfVUdfFBlwJvBn9fsrypjC8hpaB0O0naB/PZUuaZe+C5rdQ/2jaOqYKhxGFJMtM89r7/zulp4Eg3l0nebAJ7MT5Wt2MD7p+HxIL9OqOh3HcFWrF5ldZ9EgsuCbiCHfTn1W6yfMG1G3BB6Feb1scGkAkdJ/Fz0V7kmbhsEuBba83Hv0TVj0BlGL/ZEUh2Q+AxLHNDgQUcwXkj2WUY1s2CSnTDSRvZSB1+gXaQDKkdSEbhLabJlGSew+6e4NE9SlGvoieEqTzcbJUoM53CGDrwjabJUb6ICtZR/LymPdO+21uvCJawcpKmmEWGULXpEjiZ/VR4mwIIt246Jz8SNgm1KoJAUUNHkC3eeiRrQeBI5jn1UtJ4YTv7hSNkuuLRxsZ2QnMeIgR62UzWExB/umGi3YM9087RGyGifDIJulZvwT1H6pTqi9/QKVlJukECAfr7oJNLIgiSeyAxGEBOys3YbmT2hIaf8Aq+36qTPZjkFKo20SsriPCdRjiWBrvUn+R2XpbMPzA9EhoHget4Snh+eMqB2gggwb7AG14Fyefb0gfLmBo8jS4NkgGLmwl3+m0c8e69nzDLA46Sym6eCwfXULrPYjwI0E6AWjcNbsOsBPZnq86r0yXBpnYm87kxq9AP16obD4J5qhnytFhPBBnV9Wheg1fCVRoJY7US2PMbj+bKkxmCq0yNbNnTqiQTBG42EWunsuqgrYPSNIuPM29iSHaYNuonvH0mwmFv5og3FhcCROo9OR0ukxYMwJm8k9W8iNuvsn4nCuc0XDrySBEkn7Oub8n2V9DjVJc4U3GBeJNgbTHuNj9lpvDWIFJ4ZV83xOwgEcWsFR0NLIJYHOaIN4JH4vreDtc7I/w9hRUrB7CTTmb2c1wPym2/r1Ummx3hDD4gamDQ+ZBHUGbjkLzzNMgr4Uy8EnU6XAWMmZXtNBggAWP3U9TANLXBzGuB3nlZlP14LVrF2l0EENi42Idv8AQ/ZFZfmOl+gtBIkeo5ng3/NabxD4JcQXUnuYS4nQ4EsM9HAWCz3/AEOvSEvo1A5t5DdTXDm/styyjGu8JZnoqaQZng9ex5XotF8gHqvJvD+VVDUFUtIDJ0ibnp7DheoZS06Q4m8bdFm/UK2d7KOk86j04RLRI4nuoww9B7bpxFeSCOvRPAMzH89VFREkuIk7T6J9M3P7pSQELlC5nf7hcoGMsmwSUi5YIgUbKF9HhcuWwhbRb0T/AOlaeEq5USN9PTwog3oAFy5VilEsAi5kqJlCAdvufzXLlmtQjawaL/Uc7bohtUbSeYEJFy59ruN4nZSMXK4t4n9Vy5aBxJ4/ykYYMH25SLks0yowBwJJmD6JRVuALk3vtHKVcsXytT4jOD8xJ9RyJSHDCIcJm5SLlrFrH5/4S+KfiUiKcXDTcOFjeNlnR4HxEF3xGgHaCZvxcXHYrlytORYUPBTnR8So3VbVpBueP0+i1GUeGm0XSwb3cTFyNrBcuVPRfGhDY/X27JwcSNrH0XLlpklNgO9+LoTF5dTfIcJaeDtfgjkLlyghpZexhs0ADbSItsBHEQi6TAy/B2XLlFJ8QbBSGl6e91y5MFDh7gYDRA3M3+imZTaTq/RcuVCcb8Lly5Qf/9k=".replace(/^data:image\/\w+;base64,/, "");
// const config = new AWS.Config({
//     accessKeyId: process.env.ACCESS_KEY_ID,
//     secretAccessKey: process.env.SECRET_ACCESS_KEY,
//     region: process.env.REGION
// });

// AWS.config.update(config);

const s3 = new AWS.S3({apiVersion: '2006-03-01'});

module.exports.hello = (event, context, callback) => {
  callback(null, { Message: 'Hello World!', Info:{
    env: process.env
  }});
};

module.exports.goodNight = (event, context, callback) => {
  callback(null, { Message: 'Good Night World!'});
};

module.exports.upload = (event, context, callback) => {
  // const username = context.authorizer.claims.preferred_username;
  const username = "manual_user";
  console.log("event here", JSON.stringify(event, null, 2));
  const title = event.body.title ? event.body.title.replace(/\W/g,'') : 'uploaded_image';
  // const title = "manual_title";
  //get the image data from upload
  const body = event.body;
  
  const fileBuffer = new Buffer(body['image'].replace(/^data:image\/\w+;base64,/, ""), 'base64');
  const fileMime = fileType(fileBuffer);
  const mime = fileMime.mime;
  const ext = fileMime.ext;

  console.log("file mime", fileMime);

  //validate image is on right type
  if (fileBuffer.length < 500000 ) {

    // upload it to s3 with unix timestamp as a file name
    const fileName = `${title}-${Math.floor(new Date() / 1000)}.${ext}`;

    const bucket = process.env.BUCKET;

    const params = {
        Body: fileBuffer,
        Key: fileName,
        Bucket: bucket,
        ContentEncoding: 'base64',
        ContentType: mime,
        // ACL: "public-read",
        Metadata:{
          ContentType: mime,
          "user": username,
          "description":  event.body.description
        }
    };

    s3.putObject(params, (err, data) => {
        if (err) callback(new Error([err.statusCode], [err.message]));

        callback(null, {
            statusCode: '200',
            headers: {'Access-Control-Allow-Origin': '*'},
            body: JSON.stringify({'data': data})
        });
    });


  } else {
      callback(null, {
          statusCode: '402',
          headers: {'Access-Control-Allow-Origin': '*'},
          body: JSON.stringify({"message": "Not a valid file type or file too big."})
      });
  }
};